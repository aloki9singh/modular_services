{"version":3,"sources":["../../src/routes/url.route.ts"],"sourcesContent":["import express, { Request, Response } from \"express\";\r\nimport { isExpired, check_expire } from \"../middlewares/url\";\r\nimport UrlController from \"../controllers/url.controller\";\r\nimport { Routes } from \"../interfaces/routes.interface\";\r\n\r\nclass UrlRoute implements Routes {\r\n\tpublic router = express.Router();\r\n\tpublic path = \"/\";\r\n\tpublic urlController = new UrlController();\r\n\r\n\tconstructor() {\r\n\t\tthis.initializeRoutes();\r\n\t}\r\n\r\n\tprivate initializeRoutes() {\r\n\t\t//POST: create short urls\r\n\t\tthis.router.post(\r\n\t\t\t`${this.path}short`,\r\n\t\t\tcheck_expire,\r\n\t\t\tthis.urlController.shortenURL,\r\n\t\t);\r\n\r\n\t\t//GET: get all urls created by app_id\r\n\t\tthis.router.get(\r\n\t\t\t`${this.path}appid`,\r\n\t\t\tthis.urlController.getShortUrlsByAppId,\r\n\t\t);\r\n\r\n\t\t//DELETE: deletes the short url by short_id\r\n\t\tthis.router.delete(\r\n\t\t\t`${this.path}delete/:shortId`,\r\n\t\t\tthis.urlController.deleteShortUrl,\r\n\t\t);\r\n\r\n\t\t//PUT: updates short url by short_id\r\n\t\tthis.router.put(\r\n\t\t\t`${this.path}update/:shortId`,\r\n\t\t\tthis.urlController.updateURL,\r\n\t\t);\r\n\t\t\r\n\t\t//GET: redirect to original url\r\n\t\tthis.router.get(\r\n\t\t\t`${this.path}:shortId`,\r\n\t\t\tisExpired,\r\n\t\t\tthis.urlController.redirectToOriginalURL,\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default UrlRoute;\r\n"],"names":["UrlRoute","initializeRoutes","router","post","path","check_expire","urlController","shortenURL","get","getShortUrlsByAppId","delete","deleteShortUrl","put","updateURL","isExpired","redirectToOriginalURL","constructor","express","Router","UrlController"],"mappings":";;;;+BAiDA;;;eAAA;;;kDAjD2C;qBACH;wDACd;;;;;;;;;;;;;;;;;;;AAG1B,IAAA,AAAMA,WAAN,MAAMA;IASGC,mBAAmB;QAE1B,IAAI,CAACC,MAAM,CAACC,IAAI,CACf,CAAC,EAAE,IAAI,CAACC,IAAI,CAAC,KAAK,CAAC,EACnBC,iBAAY,EACZ,IAAI,CAACC,aAAa,CAACC,UAAU;QAI9B,IAAI,CAACL,MAAM,CAACM,GAAG,CACd,CAAC,EAAE,IAAI,CAACJ,IAAI,CAAC,KAAK,CAAC,EACnB,IAAI,CAACE,aAAa,CAACG,mBAAmB;QAIvC,IAAI,CAACP,MAAM,CAACQ,MAAM,CACjB,CAAC,EAAE,IAAI,CAACN,IAAI,CAAC,eAAe,CAAC,EAC7B,IAAI,CAACE,aAAa,CAACK,cAAc;QAIlC,IAAI,CAACT,MAAM,CAACU,GAAG,CACd,CAAC,EAAE,IAAI,CAACR,IAAI,CAAC,eAAe,CAAC,EAC7B,IAAI,CAACE,aAAa,CAACO,SAAS;QAI7B,IAAI,CAACX,MAAM,CAACM,GAAG,CACd,CAAC,EAAE,IAAI,CAACJ,IAAI,CAAC,QAAQ,CAAC,EACtBU,cAAS,EACT,IAAI,CAACR,aAAa,CAACS,qBAAqB;IAE1C;IApCAC,aAAc;QAJd,uBAAOd,UAASe,gBAAO,CAACC,MAAM;QAC9B,uBAAOd,QAAO;QACd,uBAAOE,iBAAgB,IAAIa,sBAAa;QAGvC,IAAI,CAAClB,gBAAgB;IACtB;AAmCD;MAEA,WAAeD"}