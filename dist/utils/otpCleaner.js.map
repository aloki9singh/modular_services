{"version":3,"sources":["../../src/utils/otpCleaner.ts"],"sourcesContent":["import OtpModel from \"../models/otp.model\";\r\n\r\nconst cleanupDatabase = async (): Promise<void> => {\r\n  try {\r\n    const result = await OtpModel.updateMany(\r\n      { \"passwords.expiresAt\": { $lt: new Date() } },\r\n      { $pull: { passwords: { expiresAt: { $lt: new Date() } } } },\r\n      { multi: true }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Error during database cleanup:\", error);\r\n  }\r\n};\r\n\r\nexport default cleanupDatabase;"],"names":["cleanupDatabase","result","OtpModel","updateMany","$lt","Date","$pull","passwords","expiresAt","multi","error","console"],"mappings":";;;;+BAcA;;;eAAA;;;mDAdqB;;;;;;AAErB,MAAMA,kBAAkB;IACtB,IAAI;QACF,MAAMC,SAAS,MAAMC,iBAAQ,CAACC,UAAU,CACtC;YAAE,uBAAuB;gBAAEC,KAAK,IAAIC;YAAO;QAAE,GAC7C;YAAEC,OAAO;gBAAEC,WAAW;oBAAEC,WAAW;wBAAEJ,KAAK,IAAIC;oBAAO;gBAAE;YAAE;QAAE,GAC3D;YAAEI,OAAO;QAAK;IAElB,EAAE,OAAOC,OAAO;QACdC,QAAQD,KAAK,CAAC,kCAAkCA;IAClD;AACF;MAEA,WAAeV"}