{"version":3,"sources":["../../src/services/twilio.service.ts"],"sourcesContent":["\r\nimport twilio from \"twilio\";\r\n\r\nclass TwilioService {\r\n  private readonly client: twilio.Twilio;\r\n\r\n  constructor() {\r\n    const accountSid: string = process.env.TWILIO_ACCOUNT_SID || \"\";\r\n    const authToken: string = process.env.TWILIO_AUTH_TOKEN || \"\";\r\n\r\n    if (!accountSid || !authToken) {\r\n      throw new Error(\"Twilio credentials not provided.\");\r\n    }\r\n\r\n    this.client = twilio(accountSid, authToken);\r\n  }\r\n\r\n  async sendOTP(identifier: string, otp: number): Promise<any> {\r\n    try {\r\n      const message = await this.client.messages.create({\r\n        body: `Your OTP is: ${otp}`,\r\n        to: `+91${identifier}`,\r\n        from: process.env.TWILIO_MOBILE || \"\",\r\n      });\r\n\r\n      return {\r\n        success: true,\r\n        message: \"OTP sent successfully\",\r\n        response: message,\r\n      };\r\n    } catch (error) {\r\n      throw new Error(`Failed to send OTP with Twilio: ${error.message}`);\r\n    }\r\n  }\r\n}\r\n\r\nexport default TwilioService;\r\n"],"names":["TwilioService","sendOTP","identifier","otp","message","client","messages","create","body","to","from","process","env","TWILIO_MOBILE","success","response","error","Error","constructor","accountSid","TWILIO_ACCOUNT_SID","authToken","TWILIO_AUTH_TOKEN","twilio"],"mappings":";;;;+BAoCA;;;eAAA;;;iDAnCmB;;;;;;;;;;;;;;;;;;;AAEnB,IAAA,AAAMA,gBAAN,MAAMA;IAcJ,MAAMC,QAAQC,UAAkB,EAAEC,GAAW,EAAgB;QAC3D,IAAI;YACF,MAAMC,UAAU,MAAM,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;gBAChDC,MAAM,CAAC,aAAa,EAAEL,IAAI,CAAC;gBAC3BM,IAAI,CAAC,GAAG,EAAEP,WAAW,CAAC;gBACtBQ,MAAMC,QAAQC,GAAG,CAACC,aAAa,IAAI;YACrC;YAEA,OAAO;gBACLC,SAAS;gBACTV,SAAS;gBACTW,UAAUX;YACZ;QACF,EAAE,OAAOY,OAAO;YACd,MAAM,IAAIC,MAAM,CAAC,gCAAgC,EAAED,MAAMZ,OAAO,CAAC,CAAC;QACpE;IACF;IA3BAc,aAAc;QAFd,uBAAiBb,UAAjB,KAAA;QAGE,MAAMc,aAAqBR,QAAQC,GAAG,CAACQ,kBAAkB,IAAI;QAC7D,MAAMC,YAAoBV,QAAQC,GAAG,CAACU,iBAAiB,IAAI;QAE3D,IAAI,CAACH,cAAc,CAACE,WAAW;YAC7B,MAAM,IAAIJ,MAAM;QAClB;QAEA,IAAI,CAACZ,MAAM,GAAGkB,IAAAA,eAAM,EAACJ,YAAYE;IACnC;AAmBF;MAEA,WAAerB"}